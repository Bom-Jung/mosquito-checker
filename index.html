<!-- index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì„œìš¸ì‹œ ëª¨ê¸° ì˜ˆë³´</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    .result { margin-top: 1rem; padding: 1rem; border: 1px solid #ddd; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>ğŸ¦Ÿ ì„œìš¸ì‹œ ëª¨ê¸° ì˜ˆë³´ í™•ì¸</h1>
  <p>API í‚¤ë¥¼ ì—°ê²°í•˜ë©´ ë‚ ì§œë³„ë¡œ ëª¨ê¸° ì˜ˆë³´ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>

  <label for="date">ë‚ ì§œ ì„ íƒ: </label>
  <input type="date" id="date" />
  <button onclick="getMosquitoData()">ì˜ˆë³´ í™•ì¸</button>

  <div id="result" class="result"></div>

  <script>
    async function getMosquitoData() {
      const date = document.getElementById("date").value;
      const resultEl = document.getElementById("result");

      if (!date) {
        resultEl.innerHTML = "ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";
        return;
      }

      const API_KEY = "YOUR_API_KEY_HERE"; // ì—¬ê¸°ì— ì„œìš¸ì‹œì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤ ë„£ê¸°
      const url = `https://corsproxy.io/?https://openapi.seoul.go.kr:8088/${API_KEY}/json/MosquitoStatus/1/5/${date}`;

      try {
        const res = await fetch(url);
        const data = await res.json();

        const info = data?.MosquitoStatus?.row?.[0];

        if (!info) {
          resultEl.innerHTML = "í•´ë‹¹ ë‚ ì§œì˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
          return;
        }

        const msg = `
          ğŸ“… <strong>${info.MOSQUITO_DATE}</strong><br/>
          ğŸŒŠ ìˆ˜ë³€ ì§€ìˆ˜: ${info.MOSQUITO_VALUE_WATER}<br/>
          ğŸ  ì£¼ê±° ì§€ìˆ˜: ${info.MOSQUITO_VALUE_HOUSE}<br/>
          ğŸŒ³ ê³µì› ì§€ìˆ˜: ${info.MOSQUITO_VALUE_PARK}
        `;
        resultEl.innerHTML = msg;
      } catch (e) {
        console.error(e);
        resultEl.innerHTML = "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
      }
    }
  </script>
</body>
</html>
